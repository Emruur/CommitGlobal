<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>API Data Review Report</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

    :root {
        --brand-primary: #0d6efd;
        --brand-success: #198754;
        --brand-secondary: #6c757d;
        --text-dark: #212529;
        --text-light: #495057;
        --surface-bg: #f8f9fa;
        --content-bg: #ffffff;
        --border-color: #dee2e6;
        --shadow: 0 4px 8px rgba(0, 0, 0, 0.06);
        --radius: 8px;
    }

    body {
        font-family: 'Inter', sans-serif;
        margin: 0;
        padding: clamp(15px, 4vw, 40px);
        background: var(--surface-bg);
        color: var(--text-dark);
        line-height: 1.6;
    }

    h1 { font-size: 2.2rem; font-weight: 700; color: var(--text-dark); text-align: center; margin-bottom: 30px; }
    h2 { font-size: 1.7rem; font-weight: 600; color: var(--text-dark); border-bottom: 2px solid var(--border-color); padding-bottom: 12px; margin-bottom: 25px; }
    h3 { font-size: 1.2rem; font-weight: 600; margin-top: 0; }
    h4 { font-size: 1.1rem; font-weight: 600; color: var(--text-light); }

    section {
        background: var(--content-bg);
        padding: clamp(15px, 3vw, 25px);
        margin-bottom: 25px;
        border-radius: var(--radius);
        box-shadow: var(--shadow);
    }

    /* --- Stats Section --- */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 20px;
    }
    .stat-card {
        background: var(--content-bg);
        border: 1px solid var(--border-color);
        padding: 20px;
        border-radius: var(--radius);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .stat-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 12px rgba(0,0,0,0.08);
    }
    .stat-card h3 { color: var(--text-light); margin-bottom: 8px; font-size: 1rem; text-transform: uppercase; letter-spacing: .5px; }
    .stat-card p { font-size: 2.25rem; font-weight: 700; color: var(--brand-primary); margin: 0; }
    .stat-card:first-of-type p {color: var(--brand-success);}

    /* --- Filters Section --- */
    .filters {
        background: var(--content-bg);
        padding: 20px;
        border-radius: var(--radius);
        margin-bottom: 25px;
        display: flex;
        flex-wrap: wrap;
        gap: 15px 25px;
        align-items: center;
    }
    .filters label { font-weight: 600; margin-right: 5px; }
    .filters select, .filters input[type='checkbox'] { margin-right: 5px; }
    .filters select { padding: 8px; border-radius: 5px; border: 1px solid var(--border-color); background: #fff; }
    .filters button {
        padding: 10px 20px;
        color: #fff;
        background: var(--brand-primary);
        border: 0;
        border-radius: 5px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s ease;
    }
    .filters button:hover { background: #0b5ed7; transform: translateY(-1px); }
    .filters button:last-of-type { background-color: var(--brand-secondary); }
    .filters button:last-of-type:hover { background-color: #5a6268; }

    /* --- Answer Section --- */
    #answer-list {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
    }
    .answer-card {
        background: var(--content-bg);
        border: 1px solid var(--border-color);
        margin-bottom: 0;
        padding: 20px;
        border-radius: var(--radius);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .answer-card:hover {
        box-shadow: 0 8px 16px rgba(0,0,0,0.08);
    }
    .answer-card h3 {
        color: var(--brand-success);
        margin: 0 0 15px 0;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--border-color);
    }

    .review-card {
        background: var(--surface-bg);
        border: 1px solid #e9ecef;
        margin-top: 15px;
        padding: 15px;
        border-radius: var(--radius);
        font-size: 0.95em;
    }
    .review-card .code {
        font-weight: 700;
        color: #b02a37;
    }
    .review-card .text {
        font-style: italic;
        color: var(--text-light);
        padding-left: 15px;
        border-left: 3px solid var(--border-color);
        margin-top: 10px;
        display: block; /* Ensures block-level treatment */
    }
    .review-card p { margin: 5px 0; }

    .hidden { display: none; }
    .no-data { text-align: center; color: var(--text-light); padding: 50px; font-size: 1.2rem; }
</style>
</head>
<body>
<h1>API Data Review Report</h1>
<section id="stats"><h2>Overall Statistics</h2><div class="stats-grid"><div class='stat-card'><h3>Total Reviews</h3><p>4</p></div><div class='stat-card'><h3>Average Overall Score (1=Best, 5=Worst)</h3><p>2.25</p></div><div class='stat-card'><h3>Score 1 Ratio</h3><p>1 / 4 = 25.00%</p></div><div class='stat-card'><h3>Score 2 Ratio</h3><p>1 / 4 = 25.00%</p></div><div class='stat-card'><h3>Score 3 Ratio</h3><p>2 / 4 = 50.00%</p></div><div class='stat-card'><h3>Score 4 Ratio</h3><p>0 / 4 = 0.00%</p></div><div class='stat-card'><h3>Score 5 Ratio</h3><p>0 / 4 = 0.00%</p></div></div></section>
<section id="answer-section">
  <h2>Answer Reviews</h2>
  <div class="filters" id="filters">
    <div>
      <label for="avg-score-filter">Average Score:</label>
      <select id="avg-score-filter">
        <option value='all'>All</option>
        <option value='1.0-1.9'>1.0 ‑ 1.9</option>
        <option value='2.0-2.9'>2.0 ‑ 2.9</option>
        <option value='3.0-3.9'>3.0 ‑ 3.9</option>
        <option value='4.0-5.0'>4.0 ‑ 5.0</option>
      </select>
    </div>
    <div>
      <label>Contains Review Score:</label>
      <input type='checkbox' id='filter-1' value='1'> <label for='filter-1'>1 (Best)</label>
      <input type='checkbox' id='filter-2' value='2'> <label for='filter-2'>2</label>
      <input type='checkbox' id='filter-3' value='3'> <label for='filter-3'>3</label>
      <input type='checkbox' id='filter-4' value='4'> <label for='filter-4'>4</label>
      <input type='checkbox' id='filter-5' value='5'> <label for='filter-5'>5 (Worst)</label>
    </div>
    <button onclick='applyFilters()'>Apply Filters</button>
    <button onclick='clearFilters()'>Clear Filters</button>
  </div>
  <div id='answer-list'><div class='answer-card' data-avg-score='1.00' data-has-review-1='true'><h3>Answer ID: 374 (Average Score: 1.00)</h3><h4>Individual Reviews:</h4><div class='review-card'><p>Review ID: 4</p><p>Score: <span class='code'>1</span></p><p>Position in Results: 3</p><p class='text'>Text: very good</p><p>Timestamp: 2025-06-13 14:27:00</p></div></div><div class='answer-card' data-avg-score='2.00' data-has-review-2='true'><h3>Answer ID: 351 (Average Score: 2.00)</h3><h4>Individual Reviews:</h4><div class='review-card'><p>Review ID: 2</p><p>Score: <span class='code'>2</span></p><p>Position in Results: 2</p><p class='text'>Text: yeah </p><p>Timestamp: 2025-06-13 14:27:00</p></div></div><div class='answer-card' data-avg-score='3.00' data-has-review-3='true'><h3>Answer ID: 221 (Average Score: 3.00)</h3><h4>Individual Reviews:</h4><div class='review-card'><p>Review ID: 1</p><p>Score: <span class='code'>3</span></p><p>Position in Results: 1</p><p class='text'>Text: not enough</p><p>Timestamp: 2025-06-13 14:27:00</p></div></div><div class='answer-card' data-avg-score='3.00' data-has-review-3='true'><h3>Answer ID: 134 (Average Score: 3.00)</h3><h4>Individual Reviews:</h4><div class='review-card'><p>Review ID: 3</p><p>Score: <span class='code'>3</span></p><p>Position in Results: 1</p><p class='text'>Text: limited</p><p>Timestamp: 2025-06-13 14:27:00</p></div></div></div> <!-- /answer-list -->
</section>
<script>
function applyFilters() {
  const avgVal = document.getElementById('avg-score-filter').value;
  const selectedCodes = Array.from(
      document.querySelectorAll('#filters input[type="checkbox"]:checked'))
      .map(cb => cb.value);

  document.querySelectorAll('.answer-card').forEach(card => {
    let show = true;
    const score = parseFloat(card.dataset.avgScore);

    // Average score filter
    if (avgVal !== 'all') {
      const [min, max] = avgVal.split('-').map(parseFloat);
      if (score < (min - 0.001) || score > (max + 0.001)) show = false;
    }

    // Review code filter (uses data attribute presence)
    if (selectedCodes.length && show) {
      show = selectedCodes.some(code => card.hasAttribute(`data-has-review-${code}`));
    }

    card.classList.toggle('hidden', !show);
  });
}

function clearFilters() {
  document.getElementById('avg-score-filter').value = 'all';
  document.querySelectorAll('#filters input[type="checkbox"]').forEach(cb => cb.checked = false);
  applyFilters();
}
</script>
</body>
</html>